@page "/checklist"
@using BlazorControls.Components
@using BlazorControls.Data
@using BlazorControls.Data.Models
@rendermode InteractiveServer

<h2>Reusable CheckBoxList Demo</h2>
<br />

<!-- Scenario 1: Employees -->
<h3>1. Employees (Object List)</h3>

<CheckBoxList Data="@EmployeeList"
              TextField="@(e => e.FullName)"
              ValueField="@(e => e.EmployeeId.ToString())"
              @bind-SelectedValues="SelectedEmployeeIds"
              @bind-SelectedTexts="SelectedEmployeeNames"
              @bind-SelectedMap="SelectedEmployeeMap" />

<div class="output-row">
    <label>Selected Employee Values:</label>
    @string.Join(", ", SelectedEmployeeIds)
</div>

<div class="output-row">
    <label>Selected Employee Texts:</label>
    @string.Join(", ", SelectedEmployeeNames)
</div>

<div class="output-row">
    <label>Selected Employee Map:</label>
    @EmployeeMapOutput
</div>

<br />

<!-- Scenario 2: Colors -->
<h3>2. Colors (Strings)</h3>

<CheckBoxList Data="@ColorList"
              @bind-SelectedValues="SelectedColors"
              @bind-SelectedTexts="SelectedColorNames"
              @bind-SelectedMap="SelectedColorMap"
              UncheckedInitially="@(new string[] { "Blue" })" />

<div class="output-row">
    <label>Selected Color Values:</label>
    @string.Join(", ", SelectedColors)
</div>

<div class="output-row">
    <label>Selected Color Texts:</label>
    @string.Join(", ", SelectedColorNames)
</div>

<div class="output-row">
    <label>Selected Color Map:</label>
    @ColorOutput
</div>

<br />

<!-- Scenario 3: Departments -->
<h3>3. Departments (Strings)</h3>

<CheckBoxList Data="@DepartmentList"
              TextField="@(d => d)"
              ValueField="@(d => d)"
              @bind-SelectedValues="SelectedDepartments"
              @bind-SelectedTexts="SelectedDepartmentNames"
              @bind-SelectedMap="SelectedDepartmentMap" />

<div class="output-row">
    <label>Selected Department Values:</label>
    @string.Join(", ", SelectedDepartments)
</div>

<div class="output-row">
    <label>Selected Department Texts:</label>
    @string.Join(", ", SelectedDepartmentNames)
</div>

<div class="output-row">
    <label>Selected Department Map:</label>
    @DepartmentOutput
</div>

<br />

<!-- Scenario 4: Status Dictionary (Map Only) -->
<h3>4. Statuses (Dictionary)</h3>

<CheckBoxList Data="@StatusList"
              TextField="@(kvp => kvp.Key)"
              ValueField="@(kvp => kvp.Key)"
              @bind-SelectedMap="SelectedStatusMap" />

<div class="output-row">
    <label>Selected Status Map:</label>
    @StatusMapOutput
</div>

@code {
    // Employees
    private List<Employee> EmployeeList = new()
    {
        new Employee { EmployeeId = 1, FirstName = "Alice", LastName = "Smith" },
        new Employee { EmployeeId = 2, FirstName = "Bob", LastName = "Johnson" },
        new Employee { EmployeeId = 3, FirstName = "Charlie", LastName = "Brown" }
    };

    private List<string> SelectedEmployeeIds { get; set; } = new();
    private List<string> SelectedEmployeeNames { get; set; } = new();
    private Dictionary<string, int> SelectedEmployeeMap { get; set; } = new();

    private string EmployeeMapOutput =>
        string.Join(", ", SelectedEmployeeMap.OrderBy(kvp => kvp.Key)
            .Select(kvp => $"{kvp.Key}:{kvp.Value}"));

    // Colors
    private List<string> ColorList = new() { "Red", "Green", "Blue", "Yellow" };
    private List<string> SelectedColors { get; set; } = new();
    private List<string> SelectedColorNames { get; set; } = new();
    private Dictionary<string, int> SelectedColorMap { get; set; } = new();

    private string ColorOutput =>
        string.Join(", ", SelectedColorMap.OrderBy(kvp => kvp.Key).Select(kvp => kvp.Key));

    // Departments
    private List<string> DepartmentList = new() { "HR", "Finance", "IT", "Sales" };
    private List<string> SelectedDepartments { get; set; } = new();
    private List<string> SelectedDepartmentNames { get; set; } = new();
    private Dictionary<string, int> SelectedDepartmentMap { get; set; } = new();

    private string DepartmentOutput =>
        string.Join(", ", SelectedDepartmentMap.OrderBy(kvp => kvp.Key).Select(kvp => kvp.Key));

    // Statuses (Map Only)
    private Dictionary<string, int> StatusList = new()
    {
        { "Open", 12 },
        { "In Progress", 7 },
        { "Closed", 30 },
        { "On Hold", 3 }
    };

    private Dictionary<string, int> SelectedStatusMap { get; set; } = new();

    private string StatusMapOutput =>
        string.Join(", ", SelectedStatusMap.OrderBy(kvp => kvp.Key)
            .Select(kvp => $"{kvp.Key}:{kvp.Value}"));
}
