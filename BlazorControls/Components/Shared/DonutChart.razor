<div class="donut-chart-container">

    @if (!string.IsNullOrWhiteSpace(Title))
    {
        <h3 class="chart-title">@Title</h3>
    }

    <svg viewBox="0 0 200 220"
         class="donut-chart"
         xmlns="http://www.w3.org/2000/svg"
         @onmouseleave="ClearHover">

        @* Render slices *@
        @foreach (var slice in Slices)
        {
            <path class="@slice.CssClass"
                  d="@slice.PathData"
                  fill="@slice.Color"
                  @onclick="() => OnSliceClickAsync(slice)"
                  @onmouseover="() => OnSliceHover(slice)" />
        }

        @* Donut center (only when IsDonut = true) *@
        @if (IsDonut)
        {
            <g class="donut-center"
               @onclick="OnCenterClickAsync"
               @onmouseover="OnCenterHover"
               @onmouseout="ClearHover">

                <circle cx="100"
                        cy="100"
                        r="@InnerRadius"
                        fill="white" />
            </g>

            @if (!string.IsNullOrWhiteSpace(InnerTitle))
            {
                <svg:text x="100"
                          y="105"
                          text-anchor="middle"
                          class="donut-inner-title">
                    @InnerTitle
                </svg:text>
            }
        }

    </svg>

    @* Tooltip *@
    @if (ShowTooltip)
    {
        <div class="donut-tooltip">
            <div class="tooltip-label">@TooltipLabel</div>
            <div class="tooltip-value">@TooltipValue</div>
        </div>
    }

    @* Legend *@
    @if (ShowLegend && Slices.Count > 0)
    {
        <ul class="donut-legend">
            @foreach (var slice in Slices.OrderBy(m=>m.Label))
            {
                <li>
                    <span class="legend-color" style="background:@slice.Color"></span>
                    @slice.Label (@slice.Value)
                </li>
            }
        </ul>
    }

</div>
